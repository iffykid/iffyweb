<!DOCTYPE html>
<html>
  <head>
    <title>iffyweb-products</title>
    <link rel="stylesheet" href="../static/styles.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/7.14.1-0/firebase.js"></script>
    <script src="../javascript-datahandler.js"></script>
     <script src="https://www.google.com/recaptcha/api.js"></script>

    <script>
    //document.location.href = document.location.href;
    window.onload = function() {
      updatePage();
    };

    window.addEventListener('storage', function(event) {
      if (event.storageArea === sessionStorage) {
        if (event.key === 'display-name') {
      // The data stored under the key 'myKey' in session storage has changed, update the page accordingly
        updatePage();
        }
        if (event.key === 'orderTable') {
      // The data stored under the key 'myKey' in session storage has changed, update the page accordingly
        updatePage();
        }
      }
    });

    function updatePage() {

      //getUserOrders();
      //console.log(sessionStorage.getItem("user_name"));
    if(sessionStorage.getItem("uid") == undefined){
      notification("PLEASE LOGIN IN OR SIGN UP");
    }
    else{
      const name = document.getElementById("display-name");
      name.innerHTML = "" + sessionStorage.getItem("user_name");

      const email = document.getElementById("display-email");
      email.innerHTML = "" + sessionStorage.getItem("user_email");

      //console.log(sessionStorage.getItem("user_phone"));
      const phone = document.getElementById("display-phone");
      //console.log("phone number " + sessionStorage.getItem("user_phone"));
      phone.innerHTML = "" + sessionStorage.getItem("user_phone");

      var storedArray = JSON.parse(sessionStorage.getItem('orderTable'));
      //console.log(storedArray);

      var table = document.getElementById("transaction-table");

      for (var i = 0; i < storedArray.length; i++) {
        var row = table.insertRow();
      for (var j = 0; j < storedArray[i].length; j++) {
        var cell = row.insertCell();
        cell.innerHTML = storedArray[i][j];
      }
      }
    }

      //var tableSplit = sessionStorage.getItem("orderTable");
      //var tableNorm = tableSplit.split("$");

      //console.log("the data:"+ tableNorm[0]);
    }

    function openForm() {
    document.getElementById("login-form").style.display = "block";
    }

    function openSignUpForm() {
    document.getElementById("signup-form").style.display = "block";
    }

    function closeForm() {
    document.getElementById("login-form").style.display = "none";
    }

    function closeSignUpForm() {
    document.getElementById("signup-form").style.display = "none";
    }

    function openForgotForm() {
    document.getElementById("forgot-password-form").style.display = "block";
    }

    function closeForgotForm() {
    document.getElementById("forgot-password-form").style.display = "none";
    }
    </script>


  </head>
  <body>
    <nav>
      <ul>
        <li><a class = "logo-nav" href="../index.html"><img src= "../static/iffy web logo.png" id ="logo"></a></li>
        <li><a href="../index.html">Home</a></li>
        <li><a href="products.html">Products</a></li>
        <li><a href="comissions.html">Services</a></li>
        <li><a href="contact.html">About Me</a></li>
        <li><a href="account.html" class="active-nav">Account</a></li>
      </ul>
    </nav>
    <main>
      <div class="top-start">
        <h1></h1>
      </div>


      <div id="noty" class="notification-box">
      <div class="notification-content">
        <span class="close" >&times;</span>
        <p id="notification-text" >Some text in the Modal..</p>
      </div>
      </div>

<div class="form-popup" id="login-form">
  <div  id="loginForm" class="form-container">
    <img src= "../static/iffy web logo.png">
    <label for="email"><b>EMAIL</b></label>
    <input type="text" placeholder="Enter Email" id="sign-email" required>

    <label for="psw"><b>PASSWORD</b></label>
    <input type="password" placeholder="Enter Password" id="sign-psw" required>

    <a onclick="openForgotForm(); closeForm();">FORGOT PASSWORD?</a>
    <button class="btn" onclick="googleSignIn()">Login</button>
    <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
  </div>
</div>


<div class="form-popup" id="signup-form">
  <div id="signUpForm" class="form-container">
    <img src= "../static/iffy web logo.png">

    <label for="email"><b>NAME</b></label>
    <input type="text" placeholder="Enter Full Name" id="user-name" required>

    <label for="email"><b>PHONE</b></label>
    <input type="text" placeholder="Enter Contact Number" id="user-phone" required>

    <label for="email"><b>EMAIL</b></label>
    <input type="text" placeholder="Enter Email" id="user-email" required>

    <label for="psw"><b>PASSWORD</b></label>
    <input type="password" placeholder="Enter Password" id="user-password1" required>
    <p> PLEASE NOTE: All information is secure and if you encounter any problem please contact account@iffweb.co.za</p>
    <button class="btn" onclick="googleSignUp();">CREATE ACCOUNT</button>
    <button type="button" class="btn cancel" onclick="closeSignUpForm()">Close</button>
  </div>
</div>

<div class="form-popup" id="forgot-password-form">
  <div id="signUpForm" class="form-container">
    <h1>FORGOT PASSWORD</h1>
    <label for="email"><b>ACCOUNT EMAIL</b></label>
    <input type="text" placeholder="Enter Account Email" id="forgot-email" required>

    <p> PLEASE NOTE: All information is secure and if you encounter any problem please contact account@iffweb.co.za</p>
    <button class="btn" onclick="forgotPassword(); closeForgotForm();">RESET PASSWORD</button>
    <button type="button" class="btn cancel" onclick="closeForgotForm()">Close</button>
  </div>
</div>




      <div class="container">
          <div class="row-profile">
      		<div class="col-md-3">

      			<div class="profile-sidebar">
      				<!-- SIDEBAR USERPIC -->
              <div class="main-profile">
      				<div class="profile-userpic">
      					<img src="https://static.change.org/profile-img/default-user-profile.svg" class="img-responsive" alt="">
      				</div>
      				<!-- END SIDEBAR USERPIC -->
      				<!-- SIDEBAR USER TITLE -->


      				      <div class="profile-usertitle">
      					     <h1 class="profile-username" id="display-name">Name Surname</h1>
      					     <h2 class="profile-useremail" id="display-email">
      						      account@iffyweb.co.za
      					     </h2>
                  <h2 class="profile-usernumber" id=display-phone>
      						      000 000 0000
      					     </h2>
      				    </div>
              </div>
              <p id = "data"></p>
              <div class="profile-content">
                <table id= "transaction-table" class="profile-transactions">
                  <tr>
                    <th>ORDER No</th>
                    <th>PRODUCT No</th>
                    <th>PRODUCT NAME</th>
                    <th>ORDER DATE</th>
                    <th>STATUS</th>
                  </tr>
                  <!-- Add more rows for additional orders -->
                </table>
              </div>
      				<!-- END SIDEBAR USER TITLE -->
      				<!-- SIDEBAR BUTTONS -->
      				<div class="profile-userbuttons">
      					<button type="button" id="login" onclick="openForm()">LOGIN</button>
      					<button type="button" id="logout" onclick="googleSignOut()">LOGOUT</button>
                <button type="button" id="signup" onclick="openSignUpForm()">SIGN UP</button>
      				</div>
      				<!-- END SIDEBAR BUTTONS -->
      				<!-- SIDEBAR MENU -->

      			</div>
      		</div>
      		<div class="col-md-9">
      		</div>
      	</div>
      </div>

    </main>
    <footer>
          <div class="footer-content">
              <p>need help? email help@iffyweb.co.za</p>
              <p>&copy; by iffy</p>
          </div>
      </footer>
  </body>
</html>
